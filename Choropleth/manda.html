<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Manda</title>
    <link
      href="http://fonts.googleapis.com/css?family=Montserrat"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <style>
      h1 {
        font-family: "Proxima Nove", Montserrat, san-serif;
        font-weight: 100;
        font-size: 2em;
        color: #f38080;
      }

      svg {
        background: transparent;
        border: solid black 1px;
      }

      .brgy {
        fill: #005daa;
        stroke: #fff;
        stroke-width: 0.5px;
        stroke-linejoin: round;
        stroke-linecap: round;
      }

      .brgy:hover {
        opacity: 0.6;
        stroke-width: 1px;
      }
    </style>
  </head>
  <body>
    <h1>Mandaluyong City</h1>
  </body>
  <script>
    var w = 480,
      h = 360;
    // Add only when using
    var zoom = d3
      .zoom()
      .scaleExtent([1, 2.5])
      .translateExtent([[0, 0], [w, h]])
      .extent([[0, 0], [w, h]])
      .on("zoom", zoomed);

    var svg = d3
      .select("body")
      .append("svg")
      .attr("width", w)
      .attr("height", h)
      .call(zoom);
    // .call(zoom.transform, d3.zoomIdentity.translate(100, 50).scale(0.5));

    var projection = d3
      .geoMercator()
      .center([121.039, 14.585])
      .translate([w / 2, h / 2])
      .scale(500000);

    var path = d3.geoPath().projection(projection);

    const g = svg.append("g"),
      h1 = d3.select("h1");

    d3.json("NCR/Mandaluyong/MandaTopo.json", function(err, data) {
      if (err) return console.log(err);

      g.selectAll("path")
        .data(topojson.feature(data, data.objects.Mandaluyong).features)
        .enter()
        .append("path")
        .attr("d", path)
        .attr("class", "brgy")
        .attr("cursor", "pointer")
        .on("mouseover", function(d) {
          h1.text(`Brgy. ${d.properties.NAME_3}`);
        })
        .on("mouseout", function(d) {
          h1.text("Mandaluyong City");
        });
    });

    function zoomed() {
      g.attr("transform", d3.event.transform);
    }
  </script>
</html>
